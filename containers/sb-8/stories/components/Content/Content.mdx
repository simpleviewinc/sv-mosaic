import { Canvas, Meta } from '@storybook/blocks';
import * as stories from "./Content.stories";
import { Required } from "../../../utils/Required";
import { Optional } from "../../../utils/Optional";

<Meta of={stories} />

# Content

The `Content` helps to show the primary information from each specific record, with the possibility to add new subsections separate from the main form.

## Props

https://github.com/simpleviewinc/sv-mosaic/blob/develop/containers/mosaic/src/components/Content/ContentTypes.ts

### `title` <Required />

`string`

Name of the section or subsection.

### `fields` <Required />

`ContentFieldDef[]`

Array of field definitions that control how content data is displayed. Each field definition specifies the field name and label for display, optional data transformations to format values, conditional visibility rules, column mapping for data extraction, and optional tooltip content. Fields are rendered in the order defined in this array, unless overridden by the `sections` prop which can regroup and reorder field display.

  **Example:**
  ```typescript
  const fields: ContentFieldDef[] = [
    {
      name: "title",
      label: "Title",
      transforms: (title) => <h3>{title}</h3> // Render the title in a h3 element
    },
    {
      name: "status",
      label: "Status",
      show: [userCan("readStatus"), hasStatus],
      transforms: (status) => <Chip>{status}</Chip> // Render the status inside a chip
    },
    {
      name: "description",
      label: "Description",
      tooltip: "Additional details about this item",
      column: "desc" // Maps to data.desc instead of data.description
    }
  ];
  ```

**ContentFieldDef Properties:**
* **name** - `string` required - The name of the field used to check validity compared with the sections and for data mapping.
* **label** - `ReactNode` required - Label that is rendered above the component generated by the transforms functions.
* **tooltip** - `ReactNode` optional - If provided, will render a tooltip icon alongside the content item's label.
* **transforms** - [`DataViewColumnTransform[]`](https://github.com/simpleviewinc/sv-mosaic/blob/develop/containers/mosaic/src/components/DataView/DataViewTypes.ts) optional - Functions which will receive raw data and transform it into a rendered component.
* **show** - [`MosaicToggle`](/docs/components-form-readme--page#MosaicToggle-t-type) optional - A value, array of values, function, or array of functions that controls whether or not to display a field.
* **column** - `string` optional - If provided, will be used as the data key instead of the field name for data extraction.

### `data` <Required />

`MosaicObject`

Data that will be used by the transform function of each field to generate the corresponding JSX element.
### `sections` <Optional />

`(string[] | ContentRow)[]`

Defines the layout and grouping of fields into rows and columns. Can be either:
- Array of string arrays - Simple field grouping where each inner array represents a row
- Array of `ContentRow` objects - Advanced configuration with custom breakpoints per row
- Mixed array - Combination of both simple arrays and `ContentRow` objects

If not provided, defaults to displaying all fields in a single column layout. The responsive behavior is controlled by the `columns` prop, but individual rows can override this with their own `breakpoints` configuration.

  **Simple layout example:**
  ```ts
  sections={[
    ["field1"],           // Single field row
    ["field2", "field3"], // Two fields in one row
    ["field4", "field5", "field6"] // Three fields in one row
  ]}
  ```

  **Advanced layout with custom breakpoints per row:**
  ```ts
  sections={[
    ["field1"], // Uses global columns setting
    {
      fields: ["field2", "field3", "field4"],
      breakpoints: { sm: 1, md: 2, lg: 3 } // Custom responsive behavior
    }
  ]}
  ```

  **Mixed configuration:**
  ```ts
  sections={[
    ["title", "subtitle"], // Simple row
    {
      fields: ["stat1", "stat2", "stat3", "stat4"],
      breakpoints: { md: 2, lg: 4 } // Statistics in responsive grid
    },
    ["description"] // Full-width description
  ]}
  ```
### `columns` <Optional />

`keyof typeof BREAKPOINTS | BreakpointColumns`

Controls the responsive layout behavior of content fields. Can be either:
- A breakpoint name (`"sm" | "md" | "lg" | "xl" | "2xl"`) - Fields will display as columns starting at this breakpoint. Below this breakpoint, fields stack vertically.
- A `BreakpointColumns` object for granular control - Specify exact number of columns at different breakpoints.

**Default:** `"md"` - Fields display as columns starting at medium breakpoint (768px)

  **Simple breakpoint example:**
  ```ts
  columns="lg" // Fields become columns at large screens and above
  ```

  **Granular control example:**
  ```ts
  columns={{
    sm: 1, // 1 column on small screens
    md: 2, // 2 columns on medium screens
    lg: 3  // 3 columns on large screens
  }}
  ```

  **Integration with sections:**
  ```ts
  // Global columns setting
  columns="md"
  sections={[
    ["field1", "field2"], // Uses columns prop settings
    {
      fields: ["field3", "field4", "field5"],
      breakpoints: { md: 2, lg: 3 } // Override for this row only
    }
  ]}
  ```

### `buttons` <Optional />

`ButtonProps[]` **optional** - Array of buttons that will be display on the top-right corner of the component.

## References

- [ContentFieldDef](https://github.com/simpleviewinc/sv-mosaic/blob/develop/containers/mosaic/src/components/Content/ContentTypes.ts#L8) - Interface defining the structure of field definitions
- [DataViewColumnTransform](https://github.com/simpleviewinc/sv-mosaic/blob/develop/containers/mosaic/src/components/DataView/DataViewTypes.ts) - Transform functions for data formatting
- [MosaicToggle](https://github.com/simpleviewinc/sv-mosaic/blob/develop/containers/mosaic/src/types/MosaicToggle.ts) - Type for conditional visibility control
- [BreakpointColumns](https://github.com/simpleviewinc/sv-mosaic/blob/develop/containers/mosaic/src/components/Content/ContentTypes.ts#L31) - Type for responsive column configuration

