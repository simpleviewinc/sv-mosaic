import{r as i,R as a}from"./index-D0AnReJb.js";import{D as h}from"./DataViewPrimaryFilter-C-ed-3Gw.js";import{D as b}from"./index-D9NSECxA.js";import{D as w}from"./DataViewFilterDropdownButtons-B-tY8L0F.js";const D=[{label:"In",value:"in"},{label:"Not In",value:"not_in"},{label:"All",value:"all"},{label:"Exists",value:"exists"},{label:"Not Exists",value:"not_exists"}],c={in:"",not_in:"not in",all:"all"};function F(e){var s;const[t,o]=i.useState({anchorEl:null,selected:[],dropdownOpen:!1}),u=e.data.value||[],l=e.data.comparison||"in";i.useEffect(()=>{async function n(){const g=await e.args.getSelected(u);o(x=>({...x,selected:g}))}n()},[e.data]);const d=function(n){o({...t,anchorEl:n.currentTarget})},r=function(){o({...t,anchorEl:null})},m=function(){o({...t,dropdownOpen:!0})},f=function(){o({...t,dropdownOpen:!1})},p=function(n){n.value.length>0||n.comparison==="exists"||n.comparison==="not_exists"?e.onChange(n):e.onChange(void 0),r()},E=e.args&&e.args.comparisons?D.filter(n=>e.args.comparisons.includes(n.value)):void 0,v=i.useMemo(()=>{if(l==="exists")return[{type:"operator",label:"exists"}];if(l==="not_exists")return[{type:"operator",label:"does not exist"}];if(t.selected.length>0){const n=[{type:"term",label:t.selected[0].label}];return c[l]&&n.unshift({type:"operator",label:c[l]}),n}},[l,t.selected]);return a.createElement("span",null,a.createElement(h,{label:e.label,parts:v,onClick:d,multiselect:t==null?void 0:t.selected}),a.createElement(w,{anchorEl:t.anchorEl,onClose:r,onEntered:m,onExited:f},a.createElement(b,{comparison:l,comparisons:E,selected:t.selected,getOptions:e.args.getOptions,isOpen:t.dropdownOpen,onApply:p,placeholder:(s=e.args)===null||s===void 0?void 0:s.placeholder,limit:e.args.limit})))}export{F as D};
