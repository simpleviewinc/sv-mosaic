import{j as t}from"./jsx-runtime-EKYJJIwR.js";import{r as g}from"./index-D0AnReJb.js";import{D as C}from"./DataViewPrimaryFilter-BhgtJ8qn.js";import{E as p}from"./DataViewPrimaryFilter.styled-BbrvVw35.js";import{a as D,D as b}from"./DataViewFilterDropdown-D2WocfoV.js";import{u as E}from"./useMosaicTranslation-CoWLI8L7.js";import{S as _,a as w,b as T}from"./DataViewFilterText.styled-H5aqHc9P.js";import{t as j}from"./testIds-Dso8kRSM.js";const x=["exists","not_exists"];function F(o){const[e,l]=g.useState({value:o.value,comparison:o.comparison}),{t:r}=E(),u=o.comparisons?o.comparisons.find(n=>n.value===e.comparison):void 0,m=function(){const n=e.value.trim();x.includes(e.comparison)?o.onChange({comparison:e.comparison}):n===""?o.onChange(void 0):o.onChange({value:n,comparison:e.comparison}),o.onClose()},d=function(){l({...e,value:"",comparison:o.comparison})},s=function(n){l({...e,value:n.target.value})},f=function(n){n.key==="Enter"&&m()},c=x.includes(e.comparison);let a;if(o.comparisons){const n=o.comparisons.map(i=>({label:i.label,onClick:function(){const v={...e};x.includes(i.value)===!0&&(v.value=""),v.comparison=i.value,l(v)}}));a=t.jsx(_,{className:"comparisonButton",label:u.label,variant:"input",color:"black",iconPosition:"right",mIcon:p,menuItems:n,$hasQuery:!c})}return t.jsxs(w,{"data-testid":j.DATA_VIEW_FILTER_TEXT_CONTENT,children:[t.jsxs("div",{className:"inputRow",children:[a,!c&&t.jsx(T,{autoComplete:"off",autoFocus:!0,placeholder:o.placeholder||r("mosaic:common.filter___"),margin:"dense",value:e.value,variant:"outlined",onChange:s,onKeyPress:f,fieldSize:"",disabled:c,$hasComparisonDropdown:!!a})]}),t.jsx(D,{onApply:m,onClear:d})]})}const h=[{label:"Contains...",value:"contains"},{label:"Does not contain...",value:"not_contains"},{label:"Equals...",value:"equals"},{label:"Not equal to...",value:"not_equals"},{label:"Exists",value:"exists"},{label:"Not Exists",value:"not_exists"}],S={equals:"is",not_equals:"is not",contains:"contains",not_contains:"does not contain"};function M(o){var c;if(o.args.comparisonDefault&&h.find(a=>a.value===o.args.comparisonDefault)===void 0)throw new Error("The selected comparison is not a valid comparison");const[e,l]=g.useState(null),r=g.useMemo(()=>{const{args:a,data:n}=o;if(!a||!a.comparisons)return"equals";if(n.comparison)return n.comparison;const i=a.comparisonDefault;return i&&a.comparisons.includes(i)?i:a.comparisons[0]},[o.args,o.args.comparisons,o.args.comparisonDefault,o.data]),u=o.data.value||"",m=function(a){l(a.currentTarget)},d=function(){l(null)};let s;r==="exists"?s="exists":r==="not_exists"?s="does not exist":u===""?s="":s=`${S[r]} "${u}"`;const f=o.args&&o.args.comparisons?h.filter(a=>o.args.comparisons.includes(a.value)):void 0;return t.jsxs("span",{children:[t.jsx(C,{label:o.label,value:s,onClick:m}),t.jsx(b,{anchorEl:e,onClose:d,children:t.jsx(F,{value:u,onChange:o.onChange,comparison:r,comparisons:f,onClose:d,placeholder:(c=o.args)==null?void 0:c.placeholder})})]})}export{M as D};
