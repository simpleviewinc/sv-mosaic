import{j as o}from"./jsx-runtime-nGUw9YhZ.js";import{r as u}from"./index-BP8_t0zE.js";import{s as v}from"./theme-DRtZtbPc.js";import{D as E}from"./DataViewPrimaryFilter-DkzTEngR.js";import{M as w}from"./Button-Dv6p7qil.js";const x=v.span``;function y(e){var l,c;const[t,n]=u.useState({anchorEl:null,selected:void 0,options:[]});if(e.args.required&&!e.data.value)throw new Error("Invalid use-case, a value is required but none was provided");const i=(l=e.data)==null?void 0:l.value;u.useEffect(()=>{let a=!0;async function h(){const m=await e.args.getSelected(i),g=await e.args.getOptions();n({...t,options:g.docs,selected:m})}return a&&h(),()=>{a=!1}},[e.data]);const d=function(a){n({...t,anchorEl:a.currentTarget})},r=function(){n({...t,anchorEl:null})};let s;t.selected!==void 0&&(s=t.selected.label);const f=function(a){a===""||a===void 0?e.onChange(void 0):e.onChange({value:a}),r()};return o.jsxs(x,{children:[o.jsx(E,{label:e.label,value:s,onClick:d}),o.jsx(w,{onClose:r,anchorEl:t.anchorEl,open:!!t.anchorEl,items:t.options,onChange:f,value:i,placeholder:(c=e.args)!=null&&c.required?void 0:"Any..."})]})}export{y as D};
